1:"$Sreact.fragment"
2:I[78454,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Row"]
3:I[73323,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Column"]
4:I[79520,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],""]
5:I[24379,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"SmartLink"]
6:I[45250,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Avatar"]
7:I[98382,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Media"]
8:I[11052,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"HeadingLink"]
1b:I[36122,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"List"]
1c:I[26935,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ListItem"]
1d:I[97784,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"CodeBlock"]
1e:I[48588,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ShareSection"]
1f:I[96470,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ClientGrid"]
20:I[14360,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"default"]
23:I[88654,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ScrollToHash"]
24:I[41118,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Icon"]
25:I[5649,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"HeadingNav"]
26:I[97367,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/1a476e30dee46234.js"],"OutletBoundary"]
27:"$Sreact.suspense"
0:{"buildId":"ZTR-QyPFYa7bdygSgsI7O","rsc":["$","$1","c",{"children":[["$","$L2",null,{"fillWidth":true,"children":[["$","$L2",null,{"maxWidth":12,"m":{"hide":true}}],["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","$L3",null,{"as":"section","maxWidth":"m","horizontal":"center","gap":"l","paddingTop":"24","children":[["$","$L4",null,{"id":"schema-blogPosting-/blog/quick-start","type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"url\":\"https://kedycatsudo.github.io/newPortfolio/blog/quick-start\",\"sameAs\":[],\"headline\":\"Launching My New Portfolio\",\"description\":\"A look at the tech stack, resources, and steps I used to create my new portfolio — and how you can do it too.\",\"image\":\"https://kedycatsudo.github.io/newPortfolio/newPortfolio/images/gallery/image.png\",\"datePublished\":\"2025-11-27\",\"dateModified\":\"2025-11-27\",\"author\":{\"@type\":\"Person\",\"name\":\"Doruk Kocausta\",\"url\":\"https://kedycatsudo.github.io/newPortfolio//about\",\"image\":{\"@type\":\"ImageObject\",\"url\":\"https://kedycatsudo.github.io/newPortfolio//newPortfolio/images/dorukAvatar.jpg\"}}}"}}],["$","$L3",null,{"maxWidth":"s","gap":"16","horizontal":"center","align":"center","children":[["$","$L5",null,{"href":"/blog","children":["$","span",null,{"className":"font-label font-strong font-m","style":{},"children":"Blog"}]}],["$","span",null,{"className":"font-body font-default font-xs neutral-on-background-weak mb-12","style":{},"children":"November 26, 2025"}],["$","h1",null,{"className":"font-display font-strong font-m neutral-on-background-strong","style":{"textWrap":"balance"},"children":"Launching My New Portfolio"}],["$","span",null,{"className":"font-body font-default font-l neutral-on-background-weak","style":{"textAlign":"center","fontStyle":"italic"},"children":"How I built a modern developer website using Magic Portfolio, Next.js, and Once UI"}]]}],["$","$L2",null,{"marginBottom":"32","horizontal":"center","children":["$","$L2",null,{"gap":"16","vertical":"center","children":[["$","$L6",null,{"size":"s","src":"/newPortfolio/images/dorukAvatar.jpg"}],["$","span",null,{"className":"font-label font-default font-m brand-on-background-weak","style":{},"children":"Doruk Kocausta"}]]}]}],["$","$L7",null,{"src":"/newPortfolio/images/gallery/image.png","alt":"Launching My New Portfolio","aspectRatio":"16/9","priority":true,"sizes":"(min-width: 768px) 100vw, 768px","border":"neutral-alpha-weak","radius":"l","marginTop":"12","marginBottom":"8"}],["$","$L3",null,{"as":"article","maxWidth":"s","children":[["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h2","id":"about","children":"About"}],"\n",["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Welcome to my new portfolio! I built this site using the Magic Portfolio template by Once UI, powered by Next.js. It’s MDX-based, SEO-friendly, responsive for any screen, and easily customizable."}],"\n",["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I wanted a platform to showcase my work, projects, and blog posts — and I found this setup perfect for developers who want both flexibility and polish."}],"\n",["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h2","id":"why-i-chose-this-stack","children":"Why I Chose This Stack"}],"\n",["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I wanted to learn a new framework not just by following tutorials, but by diving in and building something real from scratch. Hands-on experience always helps me understand and retain new skills better."}],"\n",["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"After some research, I picked these tools for my portfolio:"}],"\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14"]}],"$L15","$L16","$L17"]}]}],"$L18"]}],["$L19"],"$L1a"]}],"loading":null,"isPartial":false}
9:["$","$L1b",null,{"children":["\n",["$","$L1c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":[["$","strong",null,{"children":"Next.js"}]," — a modern React framework that makes routing, deployment, and performance optimization much easier out of the box."]}],"\n",["$","$L1c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":[["$","strong",null,{"children":"MDX"}]," — lets me write content in Markdown while also embedding React components, so my blog can be interactive and developer-friendly."]}],"\n",["$","$L1c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":[["$","strong",null,{"children":"Once UI / Magic Portfolio"}]," — provides a beautiful, ready-to-go theme with professional design, so I can focus my time on learning and content rather than building a design system from scratch."]}],"\n"]}]
a:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h2","id":"quick-start","children":"Quick Start"}]
b:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Thinking of starting your own? Here’s how I did it:"}]
c:["$","$L1d",null,{"compact":true,"marginBottom":"16","codes":[{"code":"git clone https://github.com/once-ui-system/magic-portfolio.git","language":"bash"}]}]
d:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Install the dependencies:"}]
e:["$","$L1d",null,{"compact":true,"marginBottom":"16","codes":[{"code":"npm install","language":"bash"}]}]
f:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Start your local dev server:"}]
10:["$","$L1d",null,{"compact":true,"marginBottom":"16","codes":[{"code":"npm run dev","language":"bash"}]}]
11:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h2","id":"what-s-next","children":"What’s Next?"}]
12:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I’ll be sharing more about my journey, tech experiments, and projects here. Stay tuned for posts on web development, the MERN stack, and full-stack best practices!"}]
13:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
14:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Thanks for checking out my portfolio. Feel free to use and adapt this setup for your own site!"}]
15:["$","$L1e",null,{"title":"Launching My New Portfolio","url":"https://kedycatsudo.github.io/newPortfolio//blog/quick-start"}]
21:T2f19,
# From Chaos to Clarity: How I Refactored My Edit Modal into Maintainable, Scalable React Components

Alright, let’s be honest—what you imagine will take one day can easily take three or four. That’s what happened this week. Planning, the first implementation, realizing my code was turning into spaghetti, then finally refactoring and modularizing everything—it turned into a marathon. Add a salary job and, well, life under capitalism, and four days are gone. But I have zero regrets, because what I learned was absolutely worth it.

In this article, I’ll walk you through every step as I untangle my Edit Modal from a monster file into a suite of focused, elegant components. It’s night and day. You’ll see every file, every abstraction, and exactly how (and why) I pulled it off.

*(All the code and logic you’ll see here started as one big file: `EditSourceModal.tsx`. Now, it’s organized freedom. Trust me, the difference is huge.)*

---

## What Did I End Up With?

**New files/components:**

- **EditSourceModal.tsx** (the parent, controls modal logic and orchestration)
- **AccordionItem.tsx** (shows each payment/investment in an accordion, with fields)
- **constants/fieldConfig.ts** (`PAYMENT_FIELDS` and `ITEM_FIELDS` describe all editable fields)
- **FieldInput.tsx** (super basic, dumb and generic input/selector component)

### The best part:  
Now when I open each in a separate VS Code pane I can understand the logic chain, top to bottom, at a glance. Maintainability is real!

---

## EditSourceModal.tsx – The Orchestrator

First, the prop types for clarity:

```tsx
type EditSourceModalProps = {
  open: boolean;
  source: FinanceSource | InvestmentSource;
  onClose: () => void;
  onSubmit: (updated: FinanceSource | InvestmentSource) => void;
};
```

### Internal State

```tsx
const [localSource, setLocalSource] = useState<FinanceSource | InvestmentSource>(source);
const [openItemAccordions, setOpenItemAccordions] = useState<{ [id: string]: boolean }>({});
const [errors, setErrors] = useState<{ [field: string]: string }>({});
```
- `localSource`: Holds what I’m currently editing.
- `openItemAccordions`: Which accordion(s) are open.
- `errors`: Error messages keyed by field.

### useEffect for Reset

```tsx
useEffect(() => {
  setLocalSource(source);
  setOpenItemAccordions({});
  setErrors({});
}, [source, open]);
```
Cleans everything up when data changes or the modal opens/closes.

### useEffect for Scroll Lock

```tsx
useEffect(() => {
  if (open) document.body.style.overflow = 'hidden';
  else document.body.style.overflow = '';
  return () => {
    document.body.style.overflow = '';
  };
}, [open]);
if (!open) return null;
```
Major UX win: disables scroll behind the modal.

---

### Input/Edit Handlers

```tsx
const handleItemInput = (itemId: string, field: any, value: any) => {
  const arrKey = isFinanceSource(localSource) ? 'payments' : 'items';
  setLocalSource(prev => ({
    ...prev,
    [arrKey]: (prev as any)[arrKey].map((itm: any) =>
      itm.id === itemId ? { ...itm, [field]: value } : itm,
    ),
  }) as any);
};
```

- Decides if we’re editing "payments" or "items."
- Finds the one we're editing (via `id`), and updates just that field.

```tsx
const handleSourceInput = (field: string, value: any) => {
  setLocalSource(prev => ({ ...prev, [field]: value }) as any);
};
```

- Updates a top-level field without touching others.

#### Validation logic

```tsx
function validate() {
  const err: Record<string, string> = {};
  if (!localSource.sourceName?.trim()) err.sourceName = 'Source name required';
  const items = isFinanceSource(localSource)
    ? localSource.payments
    : isInvestmentSource(localSource)
      ? localSource.items
      : [];
  for (const item of items) {
    if ('name' in item && !item.name?.trim()) err[`item.${item.id}.name`] = 'Name required';
    if ('assetName' in item && !item.assetName?.trim())
      err[`item.${item.id}.assetName`] = 'Asset name required';
  }
  setErrors(err);
  return Object.keys(err).length === 0;
}
```
- Checks that required fields are present (MVP-level, but ready to extend!).

#### Submit Handler

```tsx
const handleSubmit = () => {
  if (validate()) {
    onSubmit?.(localSource);
    onClose();
  }
};
```

---

### The Source Fields

To avoid hardcoding, I set up an array describing the fields for the modal "header":

```tsx
const sourceFields = [
  { label: 'Source Name', field: 'sourceName', value: localSource.sourceName, err: errors.sourceName },
  ...(localSource.description !== undefined
    ? [{ label: 'Description', field: 'description', value: localSource.description }]
    : []),
  ...(localSource.date !== undefined
    ? [{ label: 'Date', field: 'date', value: localSource.date, type: 'date' }]
    : []),
];
```

Which gets rendered as:

```tsx
<h2 className="text-2xl font-bold mb-2 text-[#29388A] text-center">
  Edit "{localSource.sourceName}"
</h2>
{sourceFields.map(f => (
  <FieldInput
    key={f.field}
    label={f.label}
    type={f.type}
    value={f.value}
    onChange={v => handleSourceInput(f.field ?? '', v)}
    err={f.err}
  />
))}
```

---

## constants/fieldConfig.ts – All Fields Centralized

I keep payment and investment item fields here for clarity and maintainability.

```tsx
export const PAYMENT_FIELDS = [
  { field: "name", label: "Name" },
  { field: "type", label: "Type" },
  { field: "amount", label: "Amount", type: "number" },
  { field: "date", label: "Date", type: "date" },
  { field: "loop", label: "Loop", type: "checkbox" },
  { field: "status", label: "Payment Status", enumOptions: ["coming", "paid"] }
];

export const ITEM_FIELDS = [
  { field: "assetName", label: "Asset Name" },
  { field: "term", label: "Term", enumOptions: ["short", "middle", "long"] },
  { field: "investedAmount", label: "Invested Amount", type: "number" },
  { field: "entryDate", label: "Entry Date", type: "date" },
  { field: "exitDate", label: "Exit Date", type: "date" },
  { field: "result", label: "Result", enumOptions: ["none", "profit", "loss"] },
  { field: "resultAmount", label: "Result Amount", type: "number" },
  { field: "status", label: "Status", enumOptions: ["open", "closed"] }
];
```
Any change here flows everywhere.

---

## FieldInput.tsx – A Simple, Dumb Field Component

```tsx
type FieldInputProps = {
  label: string;
  type?: string;
  value: any;
  onChange: (v: any) => void;
  enumOptions?: string[];
  err?: string;
};

export default function FieldInput({label, type, value, onChange, enumOptions, err}: FieldInputProps) {
  if (enumOptions) return (
    <label>
      <span className="block">{label}</span>
      <select
        value={value}
        onChange={e=>onChange(e.target.value)}
        className="rounded border px-2 py-1 mt-1 w-full text-black"
      >
        {enumOptions.map(opt => <option key={opt} value={opt}>{opt}</option>)}
      </select>
      {err && <span className="text-red-500 text-xs">{err}</span>}
    </label>
  );
  if (type === 'checkbox') return (
    <label className="flex items-center gap-1">
      <span className="block">{label}</span>
      <input type="checkbox" checked={!!value} onChange={e=>onChange(e.target.checked)}/>
    </label>
  );
  return (
    <label className="block">
      <span className="block">{label}</span>
      <input
        type={type||'text'}
        value={type==='date' && value ? String(value).slice(0,10) : (value ?? '')}
        onChange={e => onChange(
          type==='number' ? Number(e.target.value)
          : type==='checkbox' ? e.target.checked
          : e.target.value
        )}
        className="rounded border px-2 py-1 mt-1 w-full text-black"
      />
      {err && <span className="text-red-500 text-xs">{err}</span>}
    </label>
  );
}
```
- Handles selects, checkboxes, text, numbers, dates—just unite data and logic.
- Shows an error if needed.

---

## AccordionItem.tsx – All The Heavy Lifting, None of the Spaghetti

```tsx
type AccordionItemProps = {
  item: Record<string, any>;
  fieldConfig: {
    field: string;
    label: string;
    type?: string;
    enumOptions?: string[];
  }[];
  itemTypeKey: string;
  isOpen: boolean;
  toggleOpen: () => void;
  handleItemInput: (itemId: string, field: string, value: any) => void;
  errors?: Record<string, string>;
};

export default function AccordionItem({
  item,
  fieldConfig,
  itemTypeKey,
  isOpen,
  toggleOpen,
  handleItemInput,
  errors,
}: AccordionItemProps) {
  return (
    <div className={`border-4 border-[#29388A] rounded px-2 py-2 transition-all cursor-pointer ${isOpen ? 'bg-[#3A4483]/75 text-white' : 'text-[#29388A]'}`}>
      <div onClick={toggleOpen} className="flex flex-row justify-between items-center">
        <span> {'name' in item ? item.name : item.assetName}</span>
        <span className="text-sm text-gray-500">{isOpen ? '▼' : '▶'}</span>
      </div>
      {isOpen && (
        <div className="mt-2 flex flex-col gap-2">
          {fieldConfig.map((f) =>
            f.field === 'id' ? null : (
              <FieldInput
                key={f.field}
                label={f.label}
                type={f.type}
                enumOptions={f.enumOptions}
                value={item[f.field]}
                onChange={v => handleItemInput(item.id, f.field, v)}
                err={errors?.[`${itemTypeKey}.${item.id}.${f.field}`]}
              />
            )
          )}
        </div>
      )}
    </div>
  );
}
```
- No matter what shape the data becomes, this will render/expand/collapse and edit each field correctly.
- One clear file—not hundreds of repetitive lines for every possible field.

---

## Main Modal Use: Bringing It All Together

```tsx
{isFinanceSource(localSource) &&
  localSource.payments &&
  localSource.payments.map(payment => (
    <AccordionItem
      key={payment.id}
      item={payment}
      fieldConfig={PAYMENT_FIELDS}
      itemTypeKey="payment"
      isOpen={!!openItemAccordions[payment.id]}
      toggleOpen={() => setOpenItemAccordions(prev => ({ ...prev, [payment.id]: !prev[payment.id] }))}
      handleItemInput={handleItemInput}
      errors={errors}
    />
  ))
}
{isInvestmentSource(localSource) &&
  localSource.items &&
  localSource.items.map(item => (
    <AccordionItem
      key={item.id}
      item={item}
      fieldConfig={ITEM_FIELDS}
      itemTypeKey="item"
      isOpen={!!openItemAccordions[item.id]}
      toggleOpen={() => setOpenItemAccordions(prev => ({ ...prev, [item.id]: !prev[item.id] }))}
      handleItemInput={handleItemInput}
      errors={errors}
    />
  ))
}
```

All arrays map cleanly, and handlers/configs are passed in for complete flexibility. No repeated code, just reusable legos.

---

## Clean Modal Controls

```tsx
<div className="flex justify-end gap-2 mt-4">
  <button
    onClick={onClose}
    className="px-4 py-2 rounded bg-gray-200 text-gray-800 hover:bg-gray-300 font-semibold"
  >
    Cancel
  </button>
  <button
    onClick={handleSubmit}
    className="px-4 py-2 rounded bg-[#29388A] text-white hover:bg-blue-800 font-semibold"
  >
    Submit
  </button>
</div>
```
They do only what they need to, with zero drama.

---

## Final Reflections

Before the cleanup, this was a hot mess: one file, hundreds of lines, nearly impossible to trace. Now, thanks to focused components and field configs, I can extend and maintain everything with confidence. I can add or change fields, validation, or UI behaviors without ever touching 200 lines at once—maybe just 10, in the right place.

**Maintainability is gold.**  
This process cemented how much TypeScript + React + good planning = massive time and sanity savings. Don’t be afraid to modularize—even if it feels like “extra work.” It always pays off.

---

If you enjoyed this, found it useful, or have feedback, please share a comment! I’ll keep learning, building, and sharing—onward and upward!

---

#react #nextjs #typescript #refactor #frontend #webdevelopment #modal #forms #learningjourney #components #scalable #maintainable #ui #personalproject
16:["$","$L3",null,{"fillWidth":true,"gap":"40","horizontal":"center","marginTop":"40","children":[["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}],["$","h2",null,{"className":"font-heading font-strong font-xl neutral-on-background-strong mb-24","style":{"textWrap":"balance"},"children":"Recent posts"}],["$","$L1f",null,{"s":{"columns":1},"columns":"2","fillWidth":true,"marginBottom":"40","gap":"16","children":[["$","$L20","fromChaosToClarity",{"post":{"metadata":{"title":"From Chaos to Clarity: How I Refactored My Edit Modal into Maintainable, Scalable React Components","subtitle":"","publishedAt":"2026-01-21","summary":"","image":"/newPortfolio/images/gallery/myfinancelogo.png","images":[],"tag":"Learning Journey","team":[],"link":""},"slug":"fromChaosToClarity","content":"$21"},"thumbnail":true,"direction":"column"}],"$L22"]}]]}]
17:["$","$L23",null,{}]
18:["$","$L3",null,{"maxWidth":12,"paddingLeft":"40","fitHeight":true,"position":"sticky","top":"80","gap":"16","m":{"hide":true},"children":[["$","$L2",null,{"gap":"12","paddingLeft":"2","vertical":"center","onBackground":"neutral-medium","textVariant":"label-default-s","children":[["$","$L24",null,{"name":"document","size":"xs"}],"On this page"]}],["$","$L25",null,{"fitHeight":true}]]}]
19:["$","script","script-0",{"src":"/newPortfolio/_next/static/chunks/4c25d240ef55c323.js","async":true}]
1a:["$","$L26",null,{"children":["$","$27",null,{"name":"Next.MetadataOutlet","children":"$@28"}]}]
29:T2d33,
# Render Props, Type Guards, and Strong Scalability: Lessons from MyFinance Component Refactor

Another successful and efficient day in my frontend learning journey. I’m genuinely satisfied with the code I wrote and the new knowledge I picked up. There’s a lot I want to show and talk about today—so let’s dive right in!

## What’s New?

**New components:**

- SourcesDetailsContainer
- SourceContainer
- PaymentsContainer
- PaymentField

These are nested in order, each taking their data from the parent, starting at page.tsx.

**New skills gained:**

- Typescript extension
- Generic render prop pattern
- Typescript type guards

---

## Challenge: Passing Multiple Data Types Through a Nested Component Tree

The original problem was how to send two different types of data to deeply nested child components. My first approach—using separate components for each data type—wouldn't be scalable or reusable. And that’s not the habit I want to cultivate as a professional developer.

After some research, I discovered TypeScript’s extension abilities. I reworked my first child to look like this:

```jsx
type SourcesDetailsContainerProps<T extends { id: string }> = {
  header: string
  items: T[]
  renderSource: (item: T, open: boolean, onClick: () => void) => React.ReactNode
}
```

Now SourcesDetailsContainer expects a header, an array of items (any shape, as long as each has an id), and a function (renderSource) that tells it how to render each item. This approach makes the component highly reusable with different data and data types.

**Example usage:**

```jsx
<div className="flex flex-col w-full">
  <SourcesDetailsContainer
    header="Income Sources"
    items={incomes}
    renderSource={(item, open, onClick) => (
      <SourceContainer key={item.id} item={item} open={open} onClick={onClick} />
    )}
  />
</div>
```

---

## The Generic Render Prop Pattern

That solved passing data to the first child, but my tree is nested four levels deep—each nested component needed to access and work with its own slice of the data without getting tangled up in prop drilling or constantly sending data back up to the parent.

The solution: the **render prop** pattern.

- The parent (page.tsx) controls exactly how each item is rendered by providing a function (renderSource).
- SourcesDetailsContainer just calls this function for each item.
- This lets you use whatever child component you want downstream, and pass any props you like.

Deeply nested children are handled gracefully. When you call `<SourceContainer ... />` in the parent, you’re placing that child inside the render tree for each item. Within SourceContainer, you can have as many levels of nested components as you want (for example, SourceContainer might render PaymentsContainer, which renders PaymentField, etc.).

You don’t need to “reach in” to call deeply nested children from the parent; you only specify the immediate child in your renderSource function, and that component handles its own children.

---

## Why You Can't Directly Render Nested Children from the Parent

React’s tree is one-way! The parent can choose which child (immediate or generic) is rendered, but it can’t inject a nested grandchild into an arbitrary spot inside a lower-level component (unless you use further render props or slots).

If you want to customize deeper children, you can pass another render prop or function down yet another level.

**Example:**

```jsx
<SourceContainer
  ...
  renderPayment={(payment, open, onClick) => (
    <PaymentsContainer payment={payment} open={open} onClick={onClick} />
  )}
/>
```

Now SourceContainer calls renderPayment for each payment.

---

## The Final Implementation: Scalable, Maintainable, Dynamic

Here’s the full code for these components below (minus hyphens, for system compatibility):

### SourcesDetailsContainer

```jsx
'use client'
import { useState } from 'react'

type SourcesDetailsContainerProps<T extends { id: string }> = {
  header: string
  items: T[]
  renderSource: (item: T, open: boolean, onClick: () => void) => React.ReactNode
}

export default function SourcesDetailsContainer<T extends { id: string }>({
  header,
  items,
  renderSource,
}: SourcesDetailsContainerProps<T>) {
  const [openSources, setOpenSources] = useState<{ [id: string]: boolean }>({})

  return (
    <div className="flex flex-col rounded bg-[#989899] opacity-75 items-center gap-2 px-1">
      <h1 className="text-2xl xs:text-3xl text-[#29388A] font-bold">{header}</h1>
      {items.map(item =>
        renderSource(item, !!openSources[item.id], () =>
          setOpenSources(prev => ({ ...prev, [item.id]: !prev[item.id] }))
        )
      )}
    </div>
  )
}
```

---

### Type Guards in SourceContainer

To decide which kind of data each source represents, I use a typescript type guard like this:

```tsx
function isFinanceSource(a: FinanceSource | InvestmentSource): a is FinanceSource {
  return 'payments' in a;
}
```

If the object has a payments property, TypeScript knows it's FinanceSource.

This TypeScript feature is incredibly useful for writing maintainable, type-safe code. It lets you write if-else blocks like this for rendering different data sets:

```tsx
if (isFinanceSource(item)) {
  // For incomes/outcomes
  title = item.sourceName;
  datasInfo = [
    { id: 1, infoPair: 'Description', data: item.description ?? '' },
    {
      id: 2,
      infoPair: 'Monthly cycle amount',
      data:
        item.payments
          .filter((p) => p.loop)
          .reduce((sum, p) => sum + p.amount, 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 3,
      infoPair: 'Current amount for this month',
      data:
        item.payments
          .reduce((sum, p) => sum + p.amount, 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 4,
      infoPair: 'Average monthly total payment',
      data:
        (
          item.payments.reduce((sum, p) => sum + p.amount, 0) / (item.payments.length || 1)
        ).toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
  ];
  dataPayments = item.payments;
} else if (isInvestmentSource(item)) {
  // For investments
  title = item.name ?? '';
  datasInfo = [
    { id: 1, infoPair: 'Description', data: item.description ?? '' },
    {
      id: 2,
      infoPair: 'Total Invested Amount',
      data:
        item.items
          .reduce((sum, i) => sum + Number(i.investedAmount ?? 0), 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 3,
      infoPair: 'Total Number of Assets',
      data: item.items.length,
    },
    {
      id: 4,
      infoPair: 'Closed Positions (count)',
      data: item.items.filter((i) => i.status === 'closed').length,
    },
    {
      id: 5,
      infoPair: 'Open Positions (count)',
      data: item.items.filter((i) => i.status === 'open').length,
    },
    {
      id: 6,
      infoPair: 'Total Profit/Loss (closed)',
      data:
        item.items
          .filter((i) => i.status === 'closed')
          .reduce((sum, i) => sum + Number(i.resultAmount ?? 0), 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 7,
      infoPair: 'Average Invested per Asset',
      data:
        (item.items.length > 0
          ? item.items.reduce((sum, i) => sum + Number(i.investedAmount ?? 0), 0) /
            item.items.length
          : 0
        ).toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
  ];
  dataPayments = item.items;
}
```

---

### Rendering Payments Within SourceContainer

```jsx
{
  open && (
    <div className="mt-2 p-3 rounded transition-all">
      {dataPayments.map((payment) => (
        <PaymentsContainer
          key={payment.id}
          payment={payment}
          open={!!openPayments[payment.id]}
          onClick={() =>
            setOpenPayments((prev) => ({
              ...prev,
              [payment.id]: !prev[payment.id],
            }))
          }
        />
      ))}
    </div>
  );
}
```

---

### PaymentsContainer with Type Guards

This component chooses which type of fields to display for each payment/investment item.

```tsx
type PaymentsContainerProps = {
  payment: FinancePayment | InvestmentItem;
  open: boolean;
  onClick: () => void;
};

// Type guards for dynamic rendering
function isFinancePayment(p: FinancePayment | InvestmentItem): p is FinancePayment {
  return 'status' in p && 'loop' in p;
}
function isInvestmentItem(p: FinancePayment | InvestmentItem): p is InvestmentItem {
  return 'assetName' in p && 'term' in p;
}

export default function PaymentsContainer({ payment, open, onClick }: PaymentsContainerProps) {
  const financeFieldLabels: { [K in keyof FinancePayment]?: string } = {
    name: 'Name',
    type: 'Type',
    amount: 'Amount',
    date: 'Date',
    loop: 'Loop',
    status: 'Status',
  };

  const investmentFieldLabels: { [K in keyof InvestmentItem]?: string } = {
    assetName: 'Asset Name',
    term: 'Term',
    investedAmount: 'Invested Amount',
    entryDate: 'Entry Date',
    exitDate: 'Exit Date',
    result: 'Result',
    resultAmount: 'Result Amount',
    status: 'Status',
  };

  const fields: [string, string][] = isFinancePayment(payment)
    ? Object.entries(financeFieldLabels)
    : Object.entries(investmentFieldLabels);

  return (
    <div>
      {open && (
        <div>
          {fields.map(([field, label]) => {
            // @ts-ignore: Index dynamic field
            const value = payment[field];
            let displayValue =
              typeof value === 'boolean'
                ? value
                  ? 'Yes'
                  : 'No'
                : field === 'amount' || field === 'investedAmount' || field === 'resultAmount'
                  ? value != null
                    ? `${Number(value).toLocaleString(undefined, { minimumFractionDigits: 2 })} $`
                    : '--'
                  : value != null
                    ? String(value)
                    : '--';

            return <PaymentField key={field} field={label!} name={displayValue} />;
          })}
        </div>
      )}
    </div>
  );
}
```

---

### PaymentField Component

This is the final child, a simple reusable display for field label and value.

```jsx
'use client';
type PaymentFieldProps = {
  field: string;
  name: string | number | boolean | null;
};

export default function PaymentField({ field, name }: PaymentFieldProps) {
  return (
    <div className="flex gap-2 items-center my-0.5 overflow-x-auto">
      <span className="font-bold text-[#a9deff] whitespace-nowrap">{field}:</span>
      <span className="text-white break-all">
        {name !== null && name !== undefined ? String(name) : '--'}
      </span>
    </div>
  );
}
```

---

## Outcome and Reflections

Now I have a fully reusable, scalable, and maintainable family of four nested components for all my app’s pages and data types. This was an incredibly strong learning experience in frontend engineering, and I’m really happy because I’m now one more step closer to starting backend and database work.

I’d love to hear your thoughts—feel free to leave a comment on my LinkedIn post, or just say hi!

---

**Hashtags:**

#nextjs #reactjs #typescript #frontenddevelopment #webdevelopment #softwareengineering #renderprops #typeguard #scalablecode #maintainablecode #codingjourney #learningjourney #developercommunity #growthmindset #fullstackdevelopment #personalproject
22:["$","$L20","masteringFrontend",{"post":{"metadata":{"title":"Render Props, Type Guards, and Strong Scalability: Lessons from MyFinance Component Refactor","subtitle":"","publishedAt":"2026-01-15","summary":"","image":"/newPortfolio/images/gallery/myfinancelogo.png","images":[],"tag":"Learning Journey","team":[],"link":""},"slug":"masteringFrontend","content":"$29"},"thumbnail":true,"direction":"column"}]
28:null
