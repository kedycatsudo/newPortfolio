1:"$Sreact.fragment"
2:I[78454,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Row"]
3:I[73323,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Column"]
4:I[79520,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],""]
5:I[24379,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"SmartLink"]
6:I[45250,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Avatar"]
7:I[98382,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Media"]
8:I[11052,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"HeadingLink"]
2b:I[36122,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"List"]
2c:I[26935,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ListItem"]
2d:I[48588,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ShareSection"]
2e:I[96470,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ClientGrid"]
2f:I[14360,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"default"]
32:I[88654,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"ScrollToHash"]
33:I[41118,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"Icon"]
34:I[5649,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/40e549f30e38bf92.js","/newPortfolio/_next/static/chunks/52ccd9bb74f30947.js","/newPortfolio/_next/static/chunks/4a9c76e2a1b09db0.js","/newPortfolio/_next/static/chunks/6e7703b840071812.js","/newPortfolio/_next/static/chunks/4c25d240ef55c323.js"],"HeadingNav"]
35:I[97367,["/newPortfolio/_next/static/chunks/ff1a16fafef87110.js","/newPortfolio/_next/static/chunks/1a476e30dee46234.js"],"OutletBoundary"]
36:"$Sreact.suspense"
:HL["/newPortfolio/images/gallery/loginregister.png","image"]
:HL["/newPortfolio/images/gallery/dashboard.png","image"]
0:{"buildId":"ZTR-QyPFYa7bdygSgsI7O","rsc":["$","$1","c",{"children":[["$","$L2",null,{"fillWidth":true,"children":[["$","$L2",null,{"maxWidth":12,"m":{"hide":true}}],["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","$L3",null,{"as":"section","maxWidth":"m","horizontal":"center","gap":"l","paddingTop":"24","children":[["$","$L4",null,{"id":"schema-blogPosting-/blog/MydesignJourney","type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"url\":\"https://kedycatsudo.github.io/newPortfolio/blog/MydesignJourney\",\"sameAs\":[],\"headline\":\"MyFinance Design Journey: Kickstarting the Frontend, Facing (and Embracing) Creative Challenges\",\"description\":\"Real thoughts and progress on getting MyFinance off the ground, from login screens to dashboard, as I wrestle with design, UI decisions, and bringing my own idea to life.\",\"image\":\"https://kedycatsudo.github.io/newPortfolio/newPortfolio/images/gallery/myfinancelogo.png\",\"datePublished\":\"2025-12-10\",\"dateModified\":\"2025-12-10\",\"author\":{\"@type\":\"Person\",\"name\":\"Doruk Kocausta\",\"url\":\"https://kedycatsudo.github.io/newPortfolio//about\",\"image\":{\"@type\":\"ImageObject\",\"url\":\"https://kedycatsudo.github.io/newPortfolio//newPortfolio/images/dorukAvatar.jpg\"}}}"}}],["$","$L3",null,{"maxWidth":"s","gap":"16","horizontal":"center","align":"center","children":[["$","$L5",null,{"href":"/blog","children":["$","span",null,{"className":"font-label font-strong font-m","style":{},"children":"Blog"}]}],["$","span",null,{"className":"font-body font-default font-xs neutral-on-background-weak mb-12","style":{},"children":"December 9, 2025"}],["$","h1",null,{"className":"font-display font-strong font-m neutral-on-background-strong","style":{"textWrap":"balance"},"children":"MyFinance Design Journey: Kickstarting the Frontend, Facing (and Embracing) Creative Challenges"}],["$","span",null,{"className":"font-body font-default font-l neutral-on-background-weak","style":{"textAlign":"center","fontStyle":"italic"},"children":"Why designing UIs is harder for me than cooking risotto—and what I'm learning along the way"}]]}],["$","$L2",null,{"marginBottom":"32","horizontal":"center","children":["$","$L2",null,{"gap":"16","vertical":"center","children":[["$","$L6",null,{"size":"s","src":"/newPortfolio/images/dorukAvatar.jpg"}],["$","span",null,{"className":"font-label font-default font-m brand-on-background-weak","style":{},"children":"Doruk Kocausta"}]]}]}],["$","$L7",null,{"src":"/newPortfolio/images/gallery/myfinancelogo.png","alt":"MyFinance Design Journey: Kickstarting the Frontend, Facing (and Embracing) Creative Challenges","aspectRatio":"16/9","priority":true,"sizes":"(min-width: 768px) 100vw, 768px","border":"neutral-alpha-weak","radius":"l","marginTop":"12","marginBottom":"8"}],["$","$L3",null,{"as":"article","maxWidth":"s","children":[["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}],"\n",["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h2","id":"confessions-of-a-code-first-creator-who-isn-t-a-designer","children":"Confessions of a Code-First Creator (Who Isn't a Designer)"}],"\n",["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"It might sound strange, but for me, putting creativity on digital paper—whether it's designing a website, painting, or drawing—has always been a struggle. Which is odd, because I consider myself a very creative person. That creativity shows up in all sorts of places: problem-solving software, coming up with clever workflows, or even my work as a sous chef, plating a dish. But something about UI/UX design? It just doesn't come naturally."}],"\n","$L9","\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24"]}],"$L25","$L26","$L27"]}]}],"$L28"]}],["$L29"],"$L2a"]}],"loading":null,"isPartial":false}
9:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I don’t have formal design training or a background in art, and I suspect that’s part of the reason why it’s tough for me to know what will actually look good on a website. Still, I definitely see improvement every time I work on a new project, and that’s what matters. Progress, not perfection!"}]
a:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"login-and-register-stealing-with-pride","children":"Login & Register: Stealing with Pride"}]
b:["$","img",null,{"src":"/newPortfolio/images/gallery/loginregister.png","alt":"Login/Register Logo"}]
c:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"When it came time to design the login and registration screens, I realized I didn’t need to look any further than my own past work. I borrowed heavily from the layouts and user flows I’d built for MealMatch—there’s no shame in reusing your own tried-and-true solutions! It made the whole process much faster and let me focus on refining the user experience instead of reinventing basic forms."}]
d:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I tweaked the color scheme and spacing to fit the MyFinance brand, but many components—like labeled input fields, feedback messages, and the clean, central card layout—came straight from my previous designs. Adapting what worked well in MealMatch gave me a solid foundation and a little boost of confidence, too. Sometimes the smartest move is to steal from yourself."}]
e:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
f:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"dashboard-where-it-starts-feeling-real","children":"Dashboard: Where It Starts Feeling Real"}]
10:["$","img",null,{"src":"/newPortfolio/images/gallery/dashboard.png","alt":"Login/Register Logo"}]
11:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"After a couple hours of sketching and tweaking, I had my Dashboard page laid out and surprisingly… I liked the result! Here's the setup:"}]
12:["$","$L2b",null,{"children":["\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Logo stays anchored in the top left—because hey, brand consistency matters!"}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Page header reminds you where you are."}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Welcoming message with a splash of color (\"Welcome to MyFinance Dashboard. Congratulations, your colour is green so far this month!\")—it's a tiny touch, but helps users feel seen and in control."}],"\n"]}]
13:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"On the left, a sidebar for navigation. The main area holds three bubble containers with key data stats and listings. I chose a palette of crisp white with soft, light blue accents for the background. It adds clarity and clear separation without straining the eyes, even for longer reading or data review sessions."}]
14:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"I plan to use these bubbles throughout the app—consistency makes life easier, and creating reusable components isn’t just smart for devs, it’s a win for design too."}]
15:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
16:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"the-pie-chart-challenge","children":"The Pie Chart Challenge"}]
17:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Of course, it's not all smooth sailing. Building a pie chart that visually breaks down the data by category, with colors that mean something and look good, is going to be a real challenge—especially as a code-first person. But I'm up for it. Backend-to-frontend data connection will push me a bit outside my comfort zone, but that's the part that excites me most."}]
18:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
19:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"what-i-ve-learned-so-far","children":"What I've Learned So Far"}]
1a:["$","$L2b",null,{"children":["\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Not being a designer doesn’t mean you can’t design—just expect to iterate more."}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Borrowing trusted layouts and patterns is totally okay, especially for forms."}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Pick a color scheme you love early on, and use it as much as possible. Your app will feel more cohesive."}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Reusable components save you headaches down the line."}],"\n",["$","$L2c",null,{"marginTop":"4","marginBottom":"8","style":{"lineHeight":"175%"},"children":"Tackling the hardest parts (architecture and data flow) before visuals makes UI decisions easier."}],"\n"]}]
1b:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
1c:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"next-steps","children":"Next Steps"}]
1d:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"There’s still plenty to build: sidebar sections, adding more data containers, and thinking through the rest of the workflow screens. But with the dashboard and auth pages done, things are starting to click into place."}]
1e:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"After these steps, I’ll finally be able to start writing some code and wiring up the real data. That’s the fun part I’ve been waiting for!"}]
1f:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
20:["$","$L8",null,{"marginTop":"24","marginBottom":"12","as":"h3","id":"parting-thoughts","children":"Parting Thoughts"}]
21:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Design is always going to challenge me, but that's half the reason I wanted to build MyFinance in the first place—creating something that solves a problem I care about, and learning new tech skills in the process. Each step, even the awkward, uncertain design moments, is progress. If you want to follow along with the build, or have advice on making pie charts prettier, I’d love to hear from you!"}]
22:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"Thanks for reading—and have an awesome day!"}]
23:["$","$L2",null,{"fillWidth":true,"horizontal":"center","children":["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}]}]
24:["$","span",null,{"className":"font-body font-default font-m neutral-on-background-medium mt-8 mb-12","style":{"lineHeight":"175%"},"children":"#ShowYourWork #LearningInPublic #MyFinance #FrontendJourney #DesignStruggles #SideProject #NextJS #TypeScript #BuildingFromScratch"}]
25:["$","$L2d",null,{"title":"MyFinance Design Journey: Kickstarting the Frontend, Facing (and Embracing) Creative Challenges","url":"https://kedycatsudo.github.io/newPortfolio//blog/MydesignJourney"}]
30:T2f19,
# From Chaos to Clarity: How I Refactored My Edit Modal into Maintainable, Scalable React Components

Alright, let’s be honest—what you imagine will take one day can easily take three or four. That’s what happened this week. Planning, the first implementation, realizing my code was turning into spaghetti, then finally refactoring and modularizing everything—it turned into a marathon. Add a salary job and, well, life under capitalism, and four days are gone. But I have zero regrets, because what I learned was absolutely worth it.

In this article, I’ll walk you through every step as I untangle my Edit Modal from a monster file into a suite of focused, elegant components. It’s night and day. You’ll see every file, every abstraction, and exactly how (and why) I pulled it off.

*(All the code and logic you’ll see here started as one big file: `EditSourceModal.tsx`. Now, it’s organized freedom. Trust me, the difference is huge.)*

---

## What Did I End Up With?

**New files/components:**

- **EditSourceModal.tsx** (the parent, controls modal logic and orchestration)
- **AccordionItem.tsx** (shows each payment/investment in an accordion, with fields)
- **constants/fieldConfig.ts** (`PAYMENT_FIELDS` and `ITEM_FIELDS` describe all editable fields)
- **FieldInput.tsx** (super basic, dumb and generic input/selector component)

### The best part:  
Now when I open each in a separate VS Code pane I can understand the logic chain, top to bottom, at a glance. Maintainability is real!

---

## EditSourceModal.tsx – The Orchestrator

First, the prop types for clarity:

```tsx
type EditSourceModalProps = {
  open: boolean;
  source: FinanceSource | InvestmentSource;
  onClose: () => void;
  onSubmit: (updated: FinanceSource | InvestmentSource) => void;
};
```

### Internal State

```tsx
const [localSource, setLocalSource] = useState<FinanceSource | InvestmentSource>(source);
const [openItemAccordions, setOpenItemAccordions] = useState<{ [id: string]: boolean }>({});
const [errors, setErrors] = useState<{ [field: string]: string }>({});
```
- `localSource`: Holds what I’m currently editing.
- `openItemAccordions`: Which accordion(s) are open.
- `errors`: Error messages keyed by field.

### useEffect for Reset

```tsx
useEffect(() => {
  setLocalSource(source);
  setOpenItemAccordions({});
  setErrors({});
}, [source, open]);
```
Cleans everything up when data changes or the modal opens/closes.

### useEffect for Scroll Lock

```tsx
useEffect(() => {
  if (open) document.body.style.overflow = 'hidden';
  else document.body.style.overflow = '';
  return () => {
    document.body.style.overflow = '';
  };
}, [open]);
if (!open) return null;
```
Major UX win: disables scroll behind the modal.

---

### Input/Edit Handlers

```tsx
const handleItemInput = (itemId: string, field: any, value: any) => {
  const arrKey = isFinanceSource(localSource) ? 'payments' : 'items';
  setLocalSource(prev => ({
    ...prev,
    [arrKey]: (prev as any)[arrKey].map((itm: any) =>
      itm.id === itemId ? { ...itm, [field]: value } : itm,
    ),
  }) as any);
};
```

- Decides if we’re editing "payments" or "items."
- Finds the one we're editing (via `id`), and updates just that field.

```tsx
const handleSourceInput = (field: string, value: any) => {
  setLocalSource(prev => ({ ...prev, [field]: value }) as any);
};
```

- Updates a top-level field without touching others.

#### Validation logic

```tsx
function validate() {
  const err: Record<string, string> = {};
  if (!localSource.sourceName?.trim()) err.sourceName = 'Source name required';
  const items = isFinanceSource(localSource)
    ? localSource.payments
    : isInvestmentSource(localSource)
      ? localSource.items
      : [];
  for (const item of items) {
    if ('name' in item && !item.name?.trim()) err[`item.${item.id}.name`] = 'Name required';
    if ('assetName' in item && !item.assetName?.trim())
      err[`item.${item.id}.assetName`] = 'Asset name required';
  }
  setErrors(err);
  return Object.keys(err).length === 0;
}
```
- Checks that required fields are present (MVP-level, but ready to extend!).

#### Submit Handler

```tsx
const handleSubmit = () => {
  if (validate()) {
    onSubmit?.(localSource);
    onClose();
  }
};
```

---

### The Source Fields

To avoid hardcoding, I set up an array describing the fields for the modal "header":

```tsx
const sourceFields = [
  { label: 'Source Name', field: 'sourceName', value: localSource.sourceName, err: errors.sourceName },
  ...(localSource.description !== undefined
    ? [{ label: 'Description', field: 'description', value: localSource.description }]
    : []),
  ...(localSource.date !== undefined
    ? [{ label: 'Date', field: 'date', value: localSource.date, type: 'date' }]
    : []),
];
```

Which gets rendered as:

```tsx
<h2 className="text-2xl font-bold mb-2 text-[#29388A] text-center">
  Edit "{localSource.sourceName}"
</h2>
{sourceFields.map(f => (
  <FieldInput
    key={f.field}
    label={f.label}
    type={f.type}
    value={f.value}
    onChange={v => handleSourceInput(f.field ?? '', v)}
    err={f.err}
  />
))}
```

---

## constants/fieldConfig.ts – All Fields Centralized

I keep payment and investment item fields here for clarity and maintainability.

```tsx
export const PAYMENT_FIELDS = [
  { field: "name", label: "Name" },
  { field: "type", label: "Type" },
  { field: "amount", label: "Amount", type: "number" },
  { field: "date", label: "Date", type: "date" },
  { field: "loop", label: "Loop", type: "checkbox" },
  { field: "status", label: "Payment Status", enumOptions: ["coming", "paid"] }
];

export const ITEM_FIELDS = [
  { field: "assetName", label: "Asset Name" },
  { field: "term", label: "Term", enumOptions: ["short", "middle", "long"] },
  { field: "investedAmount", label: "Invested Amount", type: "number" },
  { field: "entryDate", label: "Entry Date", type: "date" },
  { field: "exitDate", label: "Exit Date", type: "date" },
  { field: "result", label: "Result", enumOptions: ["none", "profit", "loss"] },
  { field: "resultAmount", label: "Result Amount", type: "number" },
  { field: "status", label: "Status", enumOptions: ["open", "closed"] }
];
```
Any change here flows everywhere.

---

## FieldInput.tsx – A Simple, Dumb Field Component

```tsx
type FieldInputProps = {
  label: string;
  type?: string;
  value: any;
  onChange: (v: any) => void;
  enumOptions?: string[];
  err?: string;
};

export default function FieldInput({label, type, value, onChange, enumOptions, err}: FieldInputProps) {
  if (enumOptions) return (
    <label>
      <span className="block">{label}</span>
      <select
        value={value}
        onChange={e=>onChange(e.target.value)}
        className="rounded border px-2 py-1 mt-1 w-full text-black"
      >
        {enumOptions.map(opt => <option key={opt} value={opt}>{opt}</option>)}
      </select>
      {err && <span className="text-red-500 text-xs">{err}</span>}
    </label>
  );
  if (type === 'checkbox') return (
    <label className="flex items-center gap-1">
      <span className="block">{label}</span>
      <input type="checkbox" checked={!!value} onChange={e=>onChange(e.target.checked)}/>
    </label>
  );
  return (
    <label className="block">
      <span className="block">{label}</span>
      <input
        type={type||'text'}
        value={type==='date' && value ? String(value).slice(0,10) : (value ?? '')}
        onChange={e => onChange(
          type==='number' ? Number(e.target.value)
          : type==='checkbox' ? e.target.checked
          : e.target.value
        )}
        className="rounded border px-2 py-1 mt-1 w-full text-black"
      />
      {err && <span className="text-red-500 text-xs">{err}</span>}
    </label>
  );
}
```
- Handles selects, checkboxes, text, numbers, dates—just unite data and logic.
- Shows an error if needed.

---

## AccordionItem.tsx – All The Heavy Lifting, None of the Spaghetti

```tsx
type AccordionItemProps = {
  item: Record<string, any>;
  fieldConfig: {
    field: string;
    label: string;
    type?: string;
    enumOptions?: string[];
  }[];
  itemTypeKey: string;
  isOpen: boolean;
  toggleOpen: () => void;
  handleItemInput: (itemId: string, field: string, value: any) => void;
  errors?: Record<string, string>;
};

export default function AccordionItem({
  item,
  fieldConfig,
  itemTypeKey,
  isOpen,
  toggleOpen,
  handleItemInput,
  errors,
}: AccordionItemProps) {
  return (
    <div className={`border-4 border-[#29388A] rounded px-2 py-2 transition-all cursor-pointer ${isOpen ? 'bg-[#3A4483]/75 text-white' : 'text-[#29388A]'}`}>
      <div onClick={toggleOpen} className="flex flex-row justify-between items-center">
        <span> {'name' in item ? item.name : item.assetName}</span>
        <span className="text-sm text-gray-500">{isOpen ? '▼' : '▶'}</span>
      </div>
      {isOpen && (
        <div className="mt-2 flex flex-col gap-2">
          {fieldConfig.map((f) =>
            f.field === 'id' ? null : (
              <FieldInput
                key={f.field}
                label={f.label}
                type={f.type}
                enumOptions={f.enumOptions}
                value={item[f.field]}
                onChange={v => handleItemInput(item.id, f.field, v)}
                err={errors?.[`${itemTypeKey}.${item.id}.${f.field}`]}
              />
            )
          )}
        </div>
      )}
    </div>
  );
}
```
- No matter what shape the data becomes, this will render/expand/collapse and edit each field correctly.
- One clear file—not hundreds of repetitive lines for every possible field.

---

## Main Modal Use: Bringing It All Together

```tsx
{isFinanceSource(localSource) &&
  localSource.payments &&
  localSource.payments.map(payment => (
    <AccordionItem
      key={payment.id}
      item={payment}
      fieldConfig={PAYMENT_FIELDS}
      itemTypeKey="payment"
      isOpen={!!openItemAccordions[payment.id]}
      toggleOpen={() => setOpenItemAccordions(prev => ({ ...prev, [payment.id]: !prev[payment.id] }))}
      handleItemInput={handleItemInput}
      errors={errors}
    />
  ))
}
{isInvestmentSource(localSource) &&
  localSource.items &&
  localSource.items.map(item => (
    <AccordionItem
      key={item.id}
      item={item}
      fieldConfig={ITEM_FIELDS}
      itemTypeKey="item"
      isOpen={!!openItemAccordions[item.id]}
      toggleOpen={() => setOpenItemAccordions(prev => ({ ...prev, [item.id]: !prev[item.id] }))}
      handleItemInput={handleItemInput}
      errors={errors}
    />
  ))
}
```

All arrays map cleanly, and handlers/configs are passed in for complete flexibility. No repeated code, just reusable legos.

---

## Clean Modal Controls

```tsx
<div className="flex justify-end gap-2 mt-4">
  <button
    onClick={onClose}
    className="px-4 py-2 rounded bg-gray-200 text-gray-800 hover:bg-gray-300 font-semibold"
  >
    Cancel
  </button>
  <button
    onClick={handleSubmit}
    className="px-4 py-2 rounded bg-[#29388A] text-white hover:bg-blue-800 font-semibold"
  >
    Submit
  </button>
</div>
```
They do only what they need to, with zero drama.

---

## Final Reflections

Before the cleanup, this was a hot mess: one file, hundreds of lines, nearly impossible to trace. Now, thanks to focused components and field configs, I can extend and maintain everything with confidence. I can add or change fields, validation, or UI behaviors without ever touching 200 lines at once—maybe just 10, in the right place.

**Maintainability is gold.**  
This process cemented how much TypeScript + React + good planning = massive time and sanity savings. Don’t be afraid to modularize—even if it feels like “extra work.” It always pays off.

---

If you enjoyed this, found it useful, or have feedback, please share a comment! I’ll keep learning, building, and sharing—onward and upward!

---

#react #nextjs #typescript #refactor #frontend #webdevelopment #modal #forms #learningjourney #components #scalable #maintainable #ui #personalproject
26:["$","$L3",null,{"fillWidth":true,"gap":"40","horizontal":"center","marginTop":"40","children":[["$","div",null,{"className":"display-flex position-relative neutral-background-strong flex-row min-width-0 fill-width ","style":{"maxWidth":"var(--static-space-40)","minHeight":"var(--static-space-1)","height":"var(--static-space-1)"}}],["$","h2",null,{"className":"font-heading font-strong font-xl neutral-on-background-strong mb-24","style":{"textWrap":"balance"},"children":"Recent posts"}],["$","$L2e",null,{"s":{"columns":1},"columns":"2","fillWidth":true,"marginBottom":"40","gap":"16","children":[["$","$L2f","fromChaosToClarity",{"post":{"metadata":{"title":"From Chaos to Clarity: How I Refactored My Edit Modal into Maintainable, Scalable React Components","subtitle":"","publishedAt":"2026-01-21","summary":"","image":"/newPortfolio/images/gallery/myfinancelogo.png","images":[],"tag":"Learning Journey","team":[],"link":""},"slug":"fromChaosToClarity","content":"$30"},"thumbnail":true,"direction":"column"}],"$L31"]}]]}]
27:["$","$L32",null,{}]
28:["$","$L3",null,{"maxWidth":12,"paddingLeft":"40","fitHeight":true,"position":"sticky","top":"80","gap":"16","m":{"hide":true},"children":[["$","$L2",null,{"gap":"12","paddingLeft":"2","vertical":"center","onBackground":"neutral-medium","textVariant":"label-default-s","children":[["$","$L33",null,{"name":"document","size":"xs"}],"On this page"]}],["$","$L34",null,{"fitHeight":true}]]}]
29:["$","script","script-0",{"src":"/newPortfolio/_next/static/chunks/4c25d240ef55c323.js","async":true}]
2a:["$","$L35",null,{"children":["$","$36",null,{"name":"Next.MetadataOutlet","children":"$@37"}]}]
38:T2d33,
# Render Props, Type Guards, and Strong Scalability: Lessons from MyFinance Component Refactor

Another successful and efficient day in my frontend learning journey. I’m genuinely satisfied with the code I wrote and the new knowledge I picked up. There’s a lot I want to show and talk about today—so let’s dive right in!

## What’s New?

**New components:**

- SourcesDetailsContainer
- SourceContainer
- PaymentsContainer
- PaymentField

These are nested in order, each taking their data from the parent, starting at page.tsx.

**New skills gained:**

- Typescript extension
- Generic render prop pattern
- Typescript type guards

---

## Challenge: Passing Multiple Data Types Through a Nested Component Tree

The original problem was how to send two different types of data to deeply nested child components. My first approach—using separate components for each data type—wouldn't be scalable or reusable. And that’s not the habit I want to cultivate as a professional developer.

After some research, I discovered TypeScript’s extension abilities. I reworked my first child to look like this:

```jsx
type SourcesDetailsContainerProps<T extends { id: string }> = {
  header: string
  items: T[]
  renderSource: (item: T, open: boolean, onClick: () => void) => React.ReactNode
}
```

Now SourcesDetailsContainer expects a header, an array of items (any shape, as long as each has an id), and a function (renderSource) that tells it how to render each item. This approach makes the component highly reusable with different data and data types.

**Example usage:**

```jsx
<div className="flex flex-col w-full">
  <SourcesDetailsContainer
    header="Income Sources"
    items={incomes}
    renderSource={(item, open, onClick) => (
      <SourceContainer key={item.id} item={item} open={open} onClick={onClick} />
    )}
  />
</div>
```

---

## The Generic Render Prop Pattern

That solved passing data to the first child, but my tree is nested four levels deep—each nested component needed to access and work with its own slice of the data without getting tangled up in prop drilling or constantly sending data back up to the parent.

The solution: the **render prop** pattern.

- The parent (page.tsx) controls exactly how each item is rendered by providing a function (renderSource).
- SourcesDetailsContainer just calls this function for each item.
- This lets you use whatever child component you want downstream, and pass any props you like.

Deeply nested children are handled gracefully. When you call `<SourceContainer ... />` in the parent, you’re placing that child inside the render tree for each item. Within SourceContainer, you can have as many levels of nested components as you want (for example, SourceContainer might render PaymentsContainer, which renders PaymentField, etc.).

You don’t need to “reach in” to call deeply nested children from the parent; you only specify the immediate child in your renderSource function, and that component handles its own children.

---

## Why You Can't Directly Render Nested Children from the Parent

React’s tree is one-way! The parent can choose which child (immediate or generic) is rendered, but it can’t inject a nested grandchild into an arbitrary spot inside a lower-level component (unless you use further render props or slots).

If you want to customize deeper children, you can pass another render prop or function down yet another level.

**Example:**

```jsx
<SourceContainer
  ...
  renderPayment={(payment, open, onClick) => (
    <PaymentsContainer payment={payment} open={open} onClick={onClick} />
  )}
/>
```

Now SourceContainer calls renderPayment for each payment.

---

## The Final Implementation: Scalable, Maintainable, Dynamic

Here’s the full code for these components below (minus hyphens, for system compatibility):

### SourcesDetailsContainer

```jsx
'use client'
import { useState } from 'react'

type SourcesDetailsContainerProps<T extends { id: string }> = {
  header: string
  items: T[]
  renderSource: (item: T, open: boolean, onClick: () => void) => React.ReactNode
}

export default function SourcesDetailsContainer<T extends { id: string }>({
  header,
  items,
  renderSource,
}: SourcesDetailsContainerProps<T>) {
  const [openSources, setOpenSources] = useState<{ [id: string]: boolean }>({})

  return (
    <div className="flex flex-col rounded bg-[#989899] opacity-75 items-center gap-2 px-1">
      <h1 className="text-2xl xs:text-3xl text-[#29388A] font-bold">{header}</h1>
      {items.map(item =>
        renderSource(item, !!openSources[item.id], () =>
          setOpenSources(prev => ({ ...prev, [item.id]: !prev[item.id] }))
        )
      )}
    </div>
  )
}
```

---

### Type Guards in SourceContainer

To decide which kind of data each source represents, I use a typescript type guard like this:

```tsx
function isFinanceSource(a: FinanceSource | InvestmentSource): a is FinanceSource {
  return 'payments' in a;
}
```

If the object has a payments property, TypeScript knows it's FinanceSource.

This TypeScript feature is incredibly useful for writing maintainable, type-safe code. It lets you write if-else blocks like this for rendering different data sets:

```tsx
if (isFinanceSource(item)) {
  // For incomes/outcomes
  title = item.sourceName;
  datasInfo = [
    { id: 1, infoPair: 'Description', data: item.description ?? '' },
    {
      id: 2,
      infoPair: 'Monthly cycle amount',
      data:
        item.payments
          .filter((p) => p.loop)
          .reduce((sum, p) => sum + p.amount, 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 3,
      infoPair: 'Current amount for this month',
      data:
        item.payments
          .reduce((sum, p) => sum + p.amount, 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 4,
      infoPair: 'Average monthly total payment',
      data:
        (
          item.payments.reduce((sum, p) => sum + p.amount, 0) / (item.payments.length || 1)
        ).toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
  ];
  dataPayments = item.payments;
} else if (isInvestmentSource(item)) {
  // For investments
  title = item.name ?? '';
  datasInfo = [
    { id: 1, infoPair: 'Description', data: item.description ?? '' },
    {
      id: 2,
      infoPair: 'Total Invested Amount',
      data:
        item.items
          .reduce((sum, i) => sum + Number(i.investedAmount ?? 0), 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 3,
      infoPair: 'Total Number of Assets',
      data: item.items.length,
    },
    {
      id: 4,
      infoPair: 'Closed Positions (count)',
      data: item.items.filter((i) => i.status === 'closed').length,
    },
    {
      id: 5,
      infoPair: 'Open Positions (count)',
      data: item.items.filter((i) => i.status === 'open').length,
    },
    {
      id: 6,
      infoPair: 'Total Profit/Loss (closed)',
      data:
        item.items
          .filter((i) => i.status === 'closed')
          .reduce((sum, i) => sum + Number(i.resultAmount ?? 0), 0)
          .toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
    {
      id: 7,
      infoPair: 'Average Invested per Asset',
      data:
        (item.items.length > 0
          ? item.items.reduce((sum, i) => sum + Number(i.investedAmount ?? 0), 0) /
            item.items.length
          : 0
        ).toLocaleString(undefined, { minimumFractionDigits: 2 }) + '$',
    },
  ];
  dataPayments = item.items;
}
```

---

### Rendering Payments Within SourceContainer

```jsx
{
  open && (
    <div className="mt-2 p-3 rounded transition-all">
      {dataPayments.map((payment) => (
        <PaymentsContainer
          key={payment.id}
          payment={payment}
          open={!!openPayments[payment.id]}
          onClick={() =>
            setOpenPayments((prev) => ({
              ...prev,
              [payment.id]: !prev[payment.id],
            }))
          }
        />
      ))}
    </div>
  );
}
```

---

### PaymentsContainer with Type Guards

This component chooses which type of fields to display for each payment/investment item.

```tsx
type PaymentsContainerProps = {
  payment: FinancePayment | InvestmentItem;
  open: boolean;
  onClick: () => void;
};

// Type guards for dynamic rendering
function isFinancePayment(p: FinancePayment | InvestmentItem): p is FinancePayment {
  return 'status' in p && 'loop' in p;
}
function isInvestmentItem(p: FinancePayment | InvestmentItem): p is InvestmentItem {
  return 'assetName' in p && 'term' in p;
}

export default function PaymentsContainer({ payment, open, onClick }: PaymentsContainerProps) {
  const financeFieldLabels: { [K in keyof FinancePayment]?: string } = {
    name: 'Name',
    type: 'Type',
    amount: 'Amount',
    date: 'Date',
    loop: 'Loop',
    status: 'Status',
  };

  const investmentFieldLabels: { [K in keyof InvestmentItem]?: string } = {
    assetName: 'Asset Name',
    term: 'Term',
    investedAmount: 'Invested Amount',
    entryDate: 'Entry Date',
    exitDate: 'Exit Date',
    result: 'Result',
    resultAmount: 'Result Amount',
    status: 'Status',
  };

  const fields: [string, string][] = isFinancePayment(payment)
    ? Object.entries(financeFieldLabels)
    : Object.entries(investmentFieldLabels);

  return (
    <div>
      {open && (
        <div>
          {fields.map(([field, label]) => {
            // @ts-ignore: Index dynamic field
            const value = payment[field];
            let displayValue =
              typeof value === 'boolean'
                ? value
                  ? 'Yes'
                  : 'No'
                : field === 'amount' || field === 'investedAmount' || field === 'resultAmount'
                  ? value != null
                    ? `${Number(value).toLocaleString(undefined, { minimumFractionDigits: 2 })} $`
                    : '--'
                  : value != null
                    ? String(value)
                    : '--';

            return <PaymentField key={field} field={label!} name={displayValue} />;
          })}
        </div>
      )}
    </div>
  );
}
```

---

### PaymentField Component

This is the final child, a simple reusable display for field label and value.

```jsx
'use client';
type PaymentFieldProps = {
  field: string;
  name: string | number | boolean | null;
};

export default function PaymentField({ field, name }: PaymentFieldProps) {
  return (
    <div className="flex gap-2 items-center my-0.5 overflow-x-auto">
      <span className="font-bold text-[#a9deff] whitespace-nowrap">{field}:</span>
      <span className="text-white break-all">
        {name !== null && name !== undefined ? String(name) : '--'}
      </span>
    </div>
  );
}
```

---

## Outcome and Reflections

Now I have a fully reusable, scalable, and maintainable family of four nested components for all my app’s pages and data types. This was an incredibly strong learning experience in frontend engineering, and I’m really happy because I’m now one more step closer to starting backend and database work.

I’d love to hear your thoughts—feel free to leave a comment on my LinkedIn post, or just say hi!

---

**Hashtags:**

#nextjs #reactjs #typescript #frontenddevelopment #webdevelopment #softwareengineering #renderprops #typeguard #scalablecode #maintainablecode #codingjourney #learningjourney #developercommunity #growthmindset #fullstackdevelopment #personalproject
31:["$","$L2f","masteringFrontend",{"post":{"metadata":{"title":"Render Props, Type Guards, and Strong Scalability: Lessons from MyFinance Component Refactor","subtitle":"","publishedAt":"2026-01-15","summary":"","image":"/newPortfolio/images/gallery/myfinancelogo.png","images":[],"tag":"Learning Journey","team":[],"link":""},"slug":"masteringFrontend","content":"$38"},"thumbnail":true,"direction":"column"}]
37:null
